<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction • DarwinShinyModules</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DarwinShinyModules</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01-introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/a02-using-shiny-modules-in-shiny-app.html">Using modules in a shiny app</a></li>
    <li><a class="dropdown-item" href="../articles/a03-app-builders.html">Shiny App Builders</a></li>
    <li><a class="dropdown-item" href="../articles/a04-compatibility.html">Compatibility</a></li>
    <li><a class="dropdown-item" href="../articles/a05-creating-a-new-module.html">Creating a new Module</a></li>
    <li><a class="dropdown-item" href="../articles/a06-loading-data.html">Loading Data From Different Sources</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction</h1>
            
      

      <div class="d-none name"><code>a01-introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>Shiny apps are a wonderful way to communicate data to others. It
allows for interactivity to get additional insights into the data
without completely re-running an analysis and re-generating a
report.</p>
<p>Within the OHDSI sphere it is customary that a study has a
accompanying shiny app, to visualize the data.
<code>OhdsiShinyModules</code> and <code>ShinyAppBuilder</code> were
developed to standardize shiny apps for commonly ran analyses, mainly
from the <code>HADES</code> suite.</p>
<p><code>ShinyAppBuilder</code> seems to be air tight in the way it
functions, without much room for flexibility. It has to, to maintain the
level of standardization it provides. It offers the most extreme
opposite of what developing a fully customized shiny app would be.</p>
<p><code>DarwinShinyModules</code> attempts to strike the middle ground
between both. It deals with the overhead of <code>shiny</code>, like
namespaces, reactive environments, and server execution; provides
pre-specified modules to rapidly develop functional shiny apps, but
stays flexible enough to include custom additions to your shiny app.</p>
</div>
<div class="section level2">
<h2 id="kinds-of-modules">Kinds of modules<a class="anchor" aria-label="anchor" href="#kinds-of-modules"></a>
</h2>
<p>The idea behind <code>DarwinShinyModules</code> is that one component
can be a module. A component may be a plot, a table, text, etc. These
kinds of modules contain code to deal with some kind of data, and
present the output in a standardized way. For instance a
<code>Table</code> module might show a form of tabular data like a
<code>data.frame</code> the same standardizes way, independent of the
contents of the data.</p>
<p>As an example we can display the contents of the <code>iris</code>
and <code>mtcars</code> data sets in a similar fashion:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/DarwinShinyModules/">DarwinShinyModules</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tableIris</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Table.html">Table</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">iris</span>, title <span class="op">=</span> <span class="st">"Iris"</span><span class="op">)</span></span>
<span><span class="va">tableMtcars</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Table.html">Table</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mtcars</span>, title <span class="op">=</span> <span class="st">"MT Cars"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/preview.html">preview</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tableIris</span>, <span class="va">tableMtcars</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="img%2Fa01-1.png" id="id" class="class" style="width:100.0%"></p>
<p>Notice that both tables are effectively formatted the same, and that
only the data contained within is different. Both have a button to
download the visualized data in the bottom left, both are search-able
per column, etc.</p>
<p>We will call modules that deal directly with data like this
<strong>base</strong> modules. These modules are the lowest level of
module there is when building other modules or shiny apps. These modules
can be directly used in any form of shiny app, or other module.</p>
<p>The second kind of module in <code>DarwinShinyModules</code> is a
<strong>composed</strong> module. This kind of module is a for a large
part of its server code composed of other modules. Additional code can
make it so these modules can communicate with each other.</p>
<p>As an example, this server function uses the pre-specified
<code>table</code> and <code>plot</code> server methods. A small amount
of code is then added to update a “size” column in the data, depending
on what rows are selected in the table, and then updated in the
<code>plot</code>. The <code>plot</code> will then update with the
updated data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Server method for the `plot`</span></span>
<span>  <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span></span>
<span>  <span class="co"># Server method for the `table`</span></span>
<span>  <span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Additional code that fetches `rows_selected` from the `table` module, and</span></span>
<span>  <span class="co"># uses it to update the data in the `plot` module</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="va">bindings</span><span class="op">$</span><span class="va">rows_selected</span>, <span class="op">{</span></span>
<span>    <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">[</span>, <span class="st">"size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">[</span><span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="va">bindings</span><span class="op">$</span><span class="va">rows_selected</span>, <span class="st">"size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>    <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="va">args</span><span class="op">$</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">private</span><span class="op">$</span><span class="va">.data</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="img%2Fa01-2.png" id="id" class="class" style="width:100.0%"></p>
<p>The full underlying code is out of scope of this vignette, but
included at the end of this vignette for completeness in supplementary
A.</p>
</div>
<div class="section level2">
<h2 id="module-hierarchy">Module hierarchy<a class="anchor" aria-label="anchor" href="#module-hierarchy"></a>
</h2>
<p>Now that we know what kind of modules we have, we can explore the
hierarchy of modules. <code>DarwinShinyModules</code> uses
<code>R6</code> to implement each module. Even though R is a functional
language and does not inherently support Object Oriented Programming
(OOP), this style of code organisation lends itself very well to create
shiny modules and gives a sense of “state” within each module. This
“state” can then be manipulated during run time depending on user input,
changing the behavior of (other) modules dynamically.</p>
<p>A sense of “state” is also achievable with purely functions, and
functional programming but the data is has to live in either the global
environment, on disk, or the data needs to be attached to a function
environment:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span></span>
<span></span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">z</span> <span class="op">*</span> <span class="va">y</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="fu">foo</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bar</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>All of these options seem like a more round about way of doing
things, for this use case.</p>
<p><code>DarwinShinyModules</code> uses inheritance to inherit common
functionality between modules, following a “decorator” style design
pattern. The idea behind this is that inheritance should come naturally,
and (hopefully) intuitively.</p>
<p><img src="img%2Fa01-3.png" id="id" class="class" style="width:100.0%"></p>
<p>At the top of this hierarchy is the <code>ShinyModule</code> class.
This class deals with the overhead of <code>shiny</code>, like
namespaces, reactive environments, and server execution. All other
modules in <code>DarwinShinyModules</code> inherit from this module. The
second layer of modules are the ‘base’ modules described earlier. Some
of these modules might have an intermediate parent class. For instance
the <code>PlotStatic</code>, <code>PlotWidget</code>, and
<code>PlotPlotly</code> inherit from a <code>Plot</code> class. This is
mostly due to the specific <code>renderX()</code> and
<code>XOutput()</code> functions specific for each kind of plot. Finally
in the third layer are the ‘composed’ modules.</p>
</div>
<div class="section level2">
<h2 id="suplementals">Suplementals<a class="anchor" aria-label="anchor" href="#suplementals"></a>
</h2>
<div class="section level3">
<h3 id="a-full-code">A: Full code<a class="anchor" aria-label="anchor" href="#a-full-code"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ExampleModule</span> <span class="op">&lt;-</span> <span class="fu">R6</span><span class="fu">::</span><span class="kw"><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></span><span class="op">(</span></span>
<span>  classname <span class="op">=</span> <span class="st">"ExampleModule"</span>,</span>
<span>  inherit <span class="op">=</span> <span class="va">ShinyModule</span>,</span>
<span>  </span>
<span>  active <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  public <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    initialize <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">super</span><span class="op">$</span><span class="fu">initialize</span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.data</span> <span class="op">&lt;-</span> <span class="va">iris</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.table</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Table.html">Table</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">private</span><span class="op">$</span><span class="va">.data</span>, title <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="va">parentNamespace</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">namespace</span></span>
<span>      </span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.plot</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/PlotStatic.html">PlotStatic</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>fun <span class="op">=</span> <span class="va">private</span><span class="op">$</span><span class="va">.plotFun</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="va">parentNamespace</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">namespace</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span>,</span>
<span>  private <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    .data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    .table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    .plot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    </span>
<span>    .UI <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>        <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="fu">UI</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="fu">UI</span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    </span>
<span>    .server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span></span>
<span>      <span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="va">bindings</span><span class="op">$</span><span class="va">rows_selected</span>, <span class="op">{</span></span>
<span>        <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">[</span>, <span class="st">"size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>        <span class="va">private</span><span class="op">$</span><span class="va">.data</span><span class="op">[</span><span class="va">private</span><span class="op">$</span><span class="va">.table</span><span class="op">$</span><span class="va">bindings</span><span class="op">$</span><span class="va">rows_selected</span>, <span class="st">"size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>        <span class="va">private</span><span class="op">$</span><span class="va">.plot</span><span class="op">$</span><span class="va">args</span><span class="op">$</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">private</span><span class="op">$</span><span class="va">.data</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    </span>
<span>    .plotFun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sepal.Width</span>, y <span class="op">=</span> <span class="va">Sepal.Length</span>, size <span class="op">=</span> <span class="va">size</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">Species</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">ExampleModule</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/preview.html">preview</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ger Inberg, Maarten van Kessel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
